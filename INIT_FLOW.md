# –ü—Ä–æ—Ü–µ—Å—Å –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ SQLite WebAssembly

## üîÑ –ü–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∑–∞–≥—Ä—É–∑–∫–∏

### 1. –ó–∞–≥—Ä—É–∑–∫–∞ HTML —Å—Ç—Ä–∞–Ω–∏—Ü—ã
```
Browser loads index.html
‚îú‚îÄ‚îÄ CSS —Å—Ç–∏–ª–∏ –∑–∞–≥—Ä—É–∂–µ–Ω—ã
‚îú‚îÄ‚îÄ HTML —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ —Å–æ–∑–¥–∞–Ω–∞
‚îî‚îÄ‚îÄ JavaScript —Ñ–∞–π–ª—ã –Ω–∞—á–∏–Ω–∞—é—Ç –∑–∞–≥—Ä—É–∂–∞—Ç—å—Å—è
```

### 2. –ó–∞–≥—Ä—É–∑–∫–∞ JavaScript –±–∏–±–ª–∏–æ—Ç–µ–∫
```
<script src="https://sql.js.org/dist/sql-wasm.js"></script>
‚îú‚îÄ‚îÄ –ó–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è JavaScript –æ–±–µ—Ä—Ç–∫–∞ –¥–ª—è SQLite
‚îú‚îÄ‚îÄ –†–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ—Ç—Å—è –≥–ª–æ–±–∞–ª—å–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è initSqlJs()
‚îî‚îÄ‚îÄ –ù–û WebAssembly –º–æ–¥—É–ª—å –µ—â–µ –ù–ï –∑–∞–≥—Ä—É–∂–µ–Ω!
```

### 3. –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
```javascript
window.addEventListener('load', initSQLite)
```

### 4. –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ WebAssembly
```javascript
async function initSQLite() {
    // ‚ö†Ô∏è –í–ê–ñ–ù–û: —ç—Ç–æ –ê–°–ò–ù–•–†–û–ù–ù–ê–Ø –æ–ø–µ—Ä–∞—Ü–∏—è!
    SQL = await initSqlJs({
        locateFile: file => `https://sql.js.org/dist/${file}`
    });
    
    // ‚úÖ –¢–æ–ª—å–∫–æ –ü–û–°–õ–ï —ç—Ç–æ–≥–æ –º–æ–º–µ–Ω—Ç–∞ SQLite –≥–æ—Ç–æ–≤ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é
    db = new SQL.Database();
}
```

## üìã –ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –≤–Ω—É—Ç—Ä–∏ initSqlJs()

### –≠—Ç–∞–ø 1: –ó–∞–≥—Ä—É–∑–∫–∞ WASM —Ñ–∞–π–ª–∞
```
initSqlJs() –≤—ã–∑–æ–≤
‚îú‚îÄ‚îÄ –ó–∞–≥—Ä—É–∑–∫–∞ sqlite-wasm.wasm (–Ω–µ—Å–∫–æ–ª—å–∫–æ –º–µ–≥–∞–±–∞–π—Ç)
‚îú‚îÄ‚îÄ –ö–æ–º–ø–∏–ª—è—Ü–∏—è WebAssembly –º–æ–¥—É–ª—è
‚îú‚îÄ‚îÄ –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Ä–∞–±–æ—á–µ–π —Å—Ä–µ–¥—ã WASM
‚îî‚îÄ‚îÄ –°–æ–∑–¥–∞–Ω–∏–µ JavaScript API –æ–±–µ—Ä—Ç–æ–∫
```

### –≠—Ç–∞–ø 2: –í–æ–∑–≤—Ä–∞—Ç SQL –æ–±—ä–µ–∫—Ç–∞
```javascript
const SQL = await initSqlJs({...});
// SQL —Ç–µ–ø–µ—Ä—å —Å–æ–¥–µ—Ä–∂–∏—Ç:
// ‚îú‚îÄ‚îÄ SQL.Database - –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
// ‚îú‚îÄ‚îÄ SQL.Statement - —Ä–∞–±–æ—Ç–∞ —Å –ø–æ–¥–≥–æ—Ç–æ–≤–ª–µ–Ω–Ω—ã–º–∏ –∑–∞–ø—Ä–æ—Å–∞–º–∏  
// ‚îî‚îÄ‚îÄ –î—Ä—É–≥–∏–µ —É—Ç–∏–ª–∏—Ç—ã
```

### –≠—Ç–∞–ø 3: –°–æ–∑–¥–∞–Ω–∏–µ —ç–∫–∑–µ–º–ø–ª—è—Ä–∞ –ë–î
```javascript
db = new SQL.Database();
// ‚îú‚îÄ‚îÄ –°–æ–∑–¥–∞–µ—Ç—Å—è –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –≤ –ø–∞–º—è—Ç–∏ WASM
// ‚îú‚îÄ‚îÄ –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É—é—Ç—Å—è –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã SQLite
// ‚îî‚îÄ‚îÄ –ë–∞–∑–∞ –≥–æ—Ç–æ–≤–∞ –∫ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—é SQL –∫–æ–º–∞–Ω–¥
```

## ‚ö° –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å

### ‚ùå –ù–ï–ü–†–ê–í–ò–õ–¨–ù–û (–¥–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è):
```javascript
async function initSQLite() {
    SQL = await initSqlJs({...});
    db = new SQL.Database();        // –ú–æ–∂–µ—Ç –≤—ã–ø–æ–ª–Ω–∏—Ç—å—Å—è –î–û –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –∑–∞–≥—Ä—É–∑–∫–∏!
    createSampleData();             // –ú–æ–∂–µ—Ç –≤—ã–ø–æ–ª–Ω–∏—Ç—å—Å—è –î–û –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏ –ë–î!
    updateSchema();                 // –ú–æ–∂–µ—Ç –≤—ã–ø–æ–ª–Ω–∏—Ç—å—Å—è –î–û –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏!
}
```

### ‚úÖ –ü–†–ê–í–ò–õ–¨–ù–û (–ø–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è):
```javascript
async function initSQLite() {
    try {
        // –®–∞–≥ 1: –ñ–¥–µ–º –ø–æ–ª–Ω–æ–π –∑–∞–≥—Ä—É–∑–∫–∏ WebAssembly
        SQL = await initSqlJs({
            locateFile: file => `https://sql.js.org/dist/${file}`
        });
        console.log('‚úÖ WebAssembly –º–æ–¥—É–ª—å –∑–∞–≥—Ä—É–∂–µ–Ω');
        
        // –®–∞–≥ 2: –°–æ–∑–¥–∞–µ–º –ë–î —Ç–æ–ª—å–∫–æ –ø–æ—Å–ª–µ –∑–∞–≥—Ä—É–∑–∫–∏
        db = new SQL.Database();
        console.log('‚úÖ –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö —Å–æ–∑–¥–∞–Ω–∞');
        
        // –®–∞–≥ 3: –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º –¥–∞–Ω–Ω—ã–µ —Ç–æ–ª—å–∫–æ –ø–æ—Å–ª–µ —Å–æ–∑–¥–∞–Ω–∏—è –ë–î
        createSampleData();
        console.log('‚úÖ –î–∞–Ω–Ω—ã–µ —Å–æ–∑–¥–∞–Ω—ã');
        
        // –®–∞–≥ 4: –û–±–Ω–æ–≤–ª—è–µ–º UI —Ç–æ–ª—å–∫–æ –ø–æ—Å–ª–µ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏ –≤—Å–µ–≥–æ
        updateSchema();
        showMainContent();
        console.log('‚úÖ –ì–æ—Ç–æ–≤–æ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é');
        
    } catch (error) {
        console.error('‚ùå –û—à–∏–±–∫–∞ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏:', error);
    }
}
```

## üïê –í—Ä–µ–º–µ–Ω–Ω—ã–µ –∏–Ω—Ç–µ—Ä–≤–∞–ª—ã

–ù–∞ –º–µ–¥–ª–µ–Ω–Ω–æ–º —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–∏ –ø—Ä–æ—Ü–µ—Å—Å –º–æ–∂–µ—Ç –∑–∞–Ω–∏–º–∞—Ç—å:
- **HTML + CSS**: 100-500ms
- **JavaScript –±–∏–±–ª–∏–æ—Ç–µ–∫–∏**: 200-1000ms  
- **WebAssembly –º–æ–¥—É–ª—å**: 1-5 —Å–µ–∫—É–Ω–¥ ‚ö†Ô∏è
- **–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ë–î**: 10-50ms
- **–°–æ–∑–¥–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö**: 10-100ms

**–ò—Ç–æ–≥–æ: 1.5-6.5 —Å–µ–∫—É–Ω–¥ –¥–æ –ø–æ–ª–Ω–æ–π –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏**

## üõ°Ô∏è –ó–∞—â–∏—Ç–∞ –æ—Ç –ø—Ä–µ–∂–¥–µ–≤—Ä–µ–º–µ–Ω–Ω–æ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –ü—Ä–æ–≤–µ—Ä–∫–∏ –≤ executeSQL():
```javascript
function executeSQL() {
    // –ü—Ä–æ–≤–µ—Ä–∫–∞ 1: –ï—Å—Ç—å –ª–∏ SQL –º–æ–¥—É–ª—å?
    if (!SQL) {
        show('SQLite WebAssembly –µ—â–µ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è...');
        return;
    }
    
    // –ü—Ä–æ–≤–µ—Ä–∫–∞ 2: –ï—Å—Ç—å –ª–∏ —ç–∫–∑–µ–º–ø–ª—è—Ä –ë–î?
    if (!db) {
        show('–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –Ω–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–∞');
        return;
    }
    
    // ‚úÖ –ë–µ–∑–æ–ø–∞—Å–Ω–æ –≤—ã–ø–æ–ª–Ω—è—Ç—å SQL
    const result = db.exec(sql);
}
```

### –ü—Ä–æ–≤–µ—Ä–∫–∏ –≤ updateSchema():
```javascript
function updateSchema() {
    if (!db) {
        show('–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –Ω–µ –≥–æ—Ç–æ–≤–∞');
        return;
    }
    
    // ‚úÖ –ë–µ–∑–æ–ø–∞—Å–Ω–æ —á–∏—Ç–∞—Ç—å —Å—Ö–µ–º—É
    const tables = db.exec("SELECT ...");
}
```

## üéØ –ö–ª—é—á–µ–≤—ã–µ –º–æ–º–µ–Ω—Ç—ã

1. **`await` –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏ –≤–∞–∂–µ–Ω** - –±–µ–∑ –Ω–µ–≥–æ –∫–æ–¥ –ø–æ–ø—ã—Ç–∞–µ—Ç—Å—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ë–î –¥–æ –µ–µ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏

2. **–ü–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∏–º–µ–µ—Ç –∑–Ω–∞—á–µ–Ω–∏–µ** - –∫–∞–∂–¥—ã–π —à–∞–≥ –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –ø—Ä–µ–¥—ã–¥—É—â–µ–≥–æ

3. **–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–∞** - –∑–∞–≥—Ä—É–∑–∫–∞ WebAssembly –º–æ–∂–µ—Ç –Ω–µ —Å—Ä–∞–±–æ—Ç–∞—Ç—å

4. **UI –æ–±—Ä–∞—Ç–Ω–∞—è —Å–≤—è–∑—å –∂–µ–ª–∞—Ç–µ–ª—å–Ω–∞** - –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –¥–æ–ª–∂–µ–Ω –≤–∏–¥–µ—Ç—å –ø—Ä–æ–≥—Ä–µ—Å—Å

5. **–ü—Ä–æ–≤–µ—Ä–∫–∏ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏ –Ω—É–∂–Ω—ã** - –∑–∞—â–∏—Ç–∞ –æ—Ç race conditions

## üöÄ –†–µ–∑—É–ª—å—Ç–∞—Ç –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏

–ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è `initSQLite()`:
- ‚úÖ WebAssembly –º–æ–¥—É–ª—å –∑–∞–≥—Ä—É–∂–µ–Ω –∏ —Å–∫–æ–º–ø–∏–ª–∏—Ä–æ–≤–∞–Ω
- ‚úÖ SQLite engine –≥–æ—Ç–æ–≤ –∫ —Ä–∞–±–æ—Ç–µ  
- ‚úÖ –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö —Å–æ–∑–¥–∞–Ω–∞ –≤ –ø–∞–º—è—Ç–∏
- ‚úÖ –¢–µ—Å—Ç–æ–≤—ã–µ —Ç–∞–±–ª–∏—Ü—ã –∏ –¥–∞–Ω–Ω—ã–µ –¥–æ–±–∞–≤–ª–µ–Ω—ã
- ‚úÖ UI –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –≥–æ—Ç–æ–≤—É—é –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é —Å–∏—Å—Ç–µ–º—É
- ‚úÖ –í—Å–µ SQL –æ–ø–µ—Ä–∞—Ü–∏–∏ –±—É–¥—É—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ